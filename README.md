# 情報処理IV - レポート課題（その２）

<a href="#解答">Link: 解答をみる</a>

<hr>

> Xさんは、上司から以下に示す仕様の「投票集計プログラム」を作成するよう指示された。
> * 投票は、数値の1、2、3、4、5の5種類で行う
> * 投票者数はあらかじめ決まっている（本問では、26人とする）
> * 集計結果は、票の種類ごとに得票数と各投票の割合を表示し、あわせて得票数を棒グラフであらわす
>
> Xさんが、作成したプログラムをリスト1に示す。なお、VisualStudioで実行できるプロジェクトフォルダをグループフォルダ（プロジェクト名：tosyo）に入れてある。

#### リスト1

```c
/* 投票結果表示プログラム */
#include <stdio.h>

/* 関数のプロトタイプ宣言 */
int input(int);
void print_result(int, int, int);

/* main関数 */
int main(void) {
    // 得票数のカウント用配列（入力値と添え字の値は１ずれる）
    int n[5];
    // 全投票数（得票数を26とする）
    int num = 26;
    // 制御用変数
    int i;

    // 投票数カウント配列の初期化
    for(i = 0; i < 5; i++) {
        n[i] = 0;
    }

    // プログラム見出しの表示
    printf("***** 投票結果を集計し表示 *****\n");

    // 人数分の投票処理（入力・判定）
    // num人分の投票入力繰り返し
    for(i = 0; i < num; i++) {
        // 入力値に応じ、得票数をインクリメント
        n[ input(i) - 1 ]++;
    }

    // 集計結果の表示
    // 見出しの表示
    printf("\n*** 集計結果 ***\n");
    printf("　票　：票数（割合%% ) 123456789012345678901234567890\n");
    printf("--------------------------------------------------\n");
    // 票の種類ごとに得票数や棒グラフを表示
    for(i = 0; i < 5; i++) {
        print_result(i + 1, n[i], num);
    }

    return 0;
}

int input(int i) {
    // キーボードからの投票入力用
    int x;
    // 投票の入力
    // 投票の入力が1～5となるまで繰り返し
    do {
        printf("%2d人目の票を入力してください（1,2,3,4,5）：", i + 1);
        scanf("%d", &x);
        // 入力値が1～5なら繰り返しから脱出
        if(x >= 1 && x <= 5) {
            break;
        }
        printf("1から5の範囲で値を入力してください！\n");
    } while (1);

    return x;
}

void print_result(int i, int n, int num) {
    int i;
    printf("　%2d　：%3d　（ %3d%%　) ", t, n, 100 * n / num);
    for(i = 0; i < n; i++) {
        printf("*");
    }
    printf("\n");
}
```

#### 問

1. main関数の処理内容を__詳しく__説明せよ。
2. 上司から、投票の数値を1～8までにせよ、と命令があった。変更箇所と変更内容を__printf関数も含め、すべて__答えよ。ただし、コメントについては、解答する必要はない。解答は、次のように記すこと。
    1. 12行目をint num = 8;
    2. 56行目をfor(i = 0; i < 8; i++)

<hr>

## 解答

#### (1) main関数の処理内容を詳しく説明せよ。

```c
/* main関数 */
int main(void) {
    // 得票数のカウント用配列（入力値と添え字の値は１ずれる）
    int n[5];
    // 全投票数（得票数を26とする）
    int num = 26;
    // 制御用変数
    int i;

    // 投票数カウント配列の初期化
    for(i = 0; i < 5; i++) {
        n[i] = 0;
    }

    // プログラム見出しの表示
    printf("***** 投票結果を集計し表示 *****\n");

    // 人数分の投票処理（入力・判定）
    // num人分の投票入力繰り返し
    for(i = 0; i < num; i++) {
        // 入力値に応じ、得票数をインクリメント
        n[ input(i) - 1 ]++;
    }

    // 集計結果の表示
    // 見出しの表示
    printf("\n*** 集計結果 ***\n");
    printf("　票　：票数（割合%% ) 123456789012345678901234567890\n");
    printf("--------------------------------------------------\n");
    // 票の種類ごとに得票数や棒グラフを表示
    for(i = 0; i < 5; i++) {
        print_result(i + 1, n[i], num);
    }

    return 0;
}
```

以下、解答例

> 　11行目～13行目で、main関数内で使用する以下の変数を宣言している。
>   * 得票数のカウント数を保持する整数型配列`n`（要素数5）
>   * すべての投票数を保持する整数`num`（宣言時に26を代入）
>   * for文で使用する整数`i`
> 
> 　15行目～16行目で、得票数を表す配列`n`の全ての要素を`0`に初期化する。
> 
> 　19行目で見出しを出力。
> 
> 　22行目～23行目で、人数分の入力処理を行う。
> 23行目で、1～5の範囲で標準入力を受け付ける`input()`で入力された`n`配列の場所をインクリメントする。
> 
> 　27行目～29行目で、見出しや区切りを出力。
> 
> 　31行目～32行目で、`n`配列ごとの得票数を`print_result()`を用いて棒グラフを表示する。


#### (2)上司から、投票の数値を1～8までにせよ、と命令があった。変更箇所と変更内容を__printf関数も含め、すべて__答えよ。ただし、コメントについては、解答する必要はない。解答は、次のように記すこと。

　以下、解答例

> * 11行目を int n[8]; に。
> * 15行目を for(i = 0; i < 8; i++) に。
> * 31行目を for(i = 0; i < 8; i++) に。
> * 42行目を printf("%2d人目の票を入力してください（1,2,3,4,5,6,7,8）：", i + 1); に。
> * 44行目を if(x >= 1 && x <= 8) に。
> * 46行目を printf("1から8の範囲で値を入力してください！\n"); に。